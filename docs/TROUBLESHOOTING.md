# üîß Troubleshooting Guide

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ—à–µ–Ω–∏—é —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ Elli & Friends App.

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [TTS (Text-to-Speech) Issues](#tts-text-to-speech-issues)
- [–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è](#–ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è)
- [Web Platform](#web-platform)
- [Xcode Setup](#xcode-setup)

---

## TTS (Text-to-Speech) Issues

### üåç –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TTS

#### –°—Ç–∞—Ç—É—Å –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ —è–∑—ã–∫–∞–º

| –Ø–∑—ã–∫ | –ö–æ–¥ | TTS –∫–æ–¥ | Desktop | Web (Chrome) | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|------|-----|---------|---------|--------------|------------|
| English | en | en-US | ‚úÖ –î–∞ | ‚úÖ –î–∞ | –í—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç |
| –†—É—Å—Å–∫–∏–π | ru | ru-RU | ‚úÖ –î–∞ | ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç | –ù—É–∂–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≥–æ–ª–æ—Å–∞ |
| Fran√ßais | fr | fr-FR | ‚úÖ –î–∞ | ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç | –ù—É–∂–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≥–æ–ª–æ—Å–∞ |
| Deutsch | de | de-DE | ‚úÖ –î–∞ | ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç | –ù—É–∂–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≥–æ–ª–æ—Å–∞ |
| Italiano | it | it-IT | ‚úÖ –î–∞ | ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç | –ù—É–∂–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≥–æ–ª–æ—Å–∞ |
| ·Äô·Äº·Äî·Ä∫·Äô·Ä¨ | my | my-MM | ‚úÖ –î–∞ | ‚ùå –†–µ–¥–∫–æ | –ì–æ–ª–æ—Å–∞ –æ–±—ã—á–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç |

#### –ü–æ—á–µ–º—É TTS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —è–∑—ã–∫–∞—Ö –≤ Chrome?

**–ü—Ä–∏—á–∏–Ω–∞:** Chrome Web –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≥–æ–ª–æ—Å–∞ Text-to-Speech. –ï—Å–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –Ω–µ—Ç –≥–æ–ª–æ—Å–∞ –¥–ª—è —è–∑—ã–∫–∞, TTS –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

**–≠—Ç–æ –ù–ï –±–∞–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
- ‚úÖ –£—Ä–æ–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö
- ‚úÖ TTS –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —è–∑—ã–∫–æ–≤—ã–µ –∫–æ–¥—ã
- ‚ö†Ô∏è –ù–æ Chrome –º–æ–∂–µ—Ç –Ω–µ –∏–º–µ—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –≥–æ–ª–æ—Å–æ–≤

#### –†–µ—à–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Desktop –≤–µ—Ä—Å–∏—é (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)**

Desktop –≤–µ—Ä—Å–∏–∏ –∏–º–µ—é—Ç –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–Ω—ã–º TTS API:

```bash
# macOS
flutter run -d macos

# Windows
flutter run -d windows

# Linux
flutter run -d linux
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –õ—É—á—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TTS
- ‚úÖ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ—Å–æ–≤
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç offline
- ‚úÖ –í—Å–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≥–æ–ª–æ—Å–∞ –¥–æ—Å—Ç—É–ø–Ω—ã

**–†–µ—à–µ–Ω–∏–µ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≥–æ–ª–æ—Å–∞**

**macOS:**
1. **–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø** ‚Üí **–ü—Ä–æ–∏–∑–Ω–µ—Å–µ–Ω–∏–µ**
2. –ù–∞–∂–º–∏—Ç–µ **–°–∏—Å—Ç–µ–º–Ω—ã–π –≥–æ–ª–æ—Å** ‚Üí **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å**
3. –°–∫–∞—á–∞–π—Ç–µ –≥–æ–ª–æ—Å–∞:
   - **–†—É—Å—Å–∫–∏–π:** Yuri, Milena
   - **Fran√ßais:** Thomas, Am√©lie
   - **Deutsch:** Anna, Markus
   - **Italiano:** Alice, Luca

**Windows:**
1. **Settings** ‚Üí **Time & Language** ‚Üí **Speech**
2. **Manage voices** ‚Üí **Add voices**
3. –°–∫–∞—á–∞–π—Ç–µ –≥–æ–ª–æ—Å–∞ Microsoft –¥–ª—è –Ω—É–∂–Ω—ã—Ö —è–∑—ã–∫–æ–≤

**Linux:**
```bash
# espeak-ng —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —è–∑—ã–∫–æ–≤
sudo apt install espeak-ng espeak-ng-data

# –ò–ª–∏ festival
sudo apt install festival festival-freebsoft-utils festvox-ru
```

**–†–µ—à–µ–Ω–∏–µ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≥–æ–ª–æ—Å–∞**

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
window.speechSynthesis.getVoices().forEach(voice => {
  console.log(voice.name, voice.lang);
});
```

### üá´üá∑ –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π TTS –Ω–∞ Web

**–ü—Ä–æ–±–ª–µ–º–∞:** –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π TTS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Web –≤–µ—Ä—Å–∏–∏ (Chrome), —Ö–æ—Ç—è —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Desktop.

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–∞–≥ –≤ `flutter_tts` package –¥–ª—è Web –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã. –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–µ –≥–æ–ª–æ—Å–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–æ–≥–æ
const utterance = new SpeechSynthesisUtterance("Bonjour");
utterance.lang = 'fr-FR';
window.speechSynthesis.speak(utterance);
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ desktop –≤–µ—Ä—Å–∏—é (`flutter run -d macos`)
- –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–µ –≥–æ–ª–æ—Å–∞ (—Å–º. –≤—ã—à–µ)

### üá∑üá∫ –†—É—Å—Å–∫–∏–π TTS

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Desktop –∏ Web (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≥–æ–ª–æ—Å–æ–≤)

**–ö–æ–¥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
```dart
// lib/core/constants/supported_languages.dart
static const Map<String, String> ttsLanguageCodes = {
  'ru': 'ru-RU',  // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π TTS –∫–æ–¥
  // ...
};
```

**Fallback:** –ï—Å–ª–∏ —Ä—É—Å—Å–∫–∏–π –≥–æ–ª–æ—Å –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–Ω–≥–ª–∏–π—Å–∫–∏–π (`en-US`).

---

## –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

### üá∑üá∫ –†—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

**–§–∞–π–ª—ã:**
- `lib/l10n/app_ru.arb` - –†—É—Å—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏
- `lib/l10n/app_localizations_ru.dart` - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏:**
```bash
flutter gen-l10n
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```dart
// –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ supportedLocales
MaterialApp(
  localizationsDelegates: AppLocalizations.localizationsDelegates,
  supportedLocales: SupportedLanguages.supportedLocales,
  // ...
);
```

---

## Web Platform

### üåê –ó–∞–ø—É—Å–∫ –Ω–∞ Web

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
flutter run -d chrome
```

**–ò–ª–∏ —Å hot reload:**
```bash
flutter run -d chrome --hot
```

**–û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**

#### 1. Audio –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ü—Ä–∏—á–∏–Ω–∞:** –ë—Ä–∞—É–∑–µ—Ä—ã —Ç—Ä–µ–±—É—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–¥ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º –∞—É–¥–∏–æ
- **–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —É—Ä–æ–∫–∞

#### 2. TTS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —è–∑—ã–∫–æ–≤
- **–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≥–æ–ª–æ—Å–∞
- **–†–µ—à–µ–Ω–∏–µ:** –°–º. —Ä–∞–∑–¥–µ–ª [TTS Issues](#tts-text-to-speech-issues)

#### 3. CORS –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ assets
- **–ü—Ä–∏—á–∏–Ω–∞:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `flutter run -d chrome` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è HTML

### üì± –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ | –ö–∞—á–µ—Å—Ç–≤–æ TTS | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|-----------|--------------|------------|
| macOS Desktop | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –õ—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç |
| Windows Desktop | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –û—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| Linux Desktop | ‚úÖ –•–æ—Ä–æ—à–æ | ‚≠ê‚≠ê‚≠ê | –ù—É–∂–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ |
| Chrome Web (macOS) | ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç | ‚≠ê‚≠ê‚≠ê | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –≥–æ–ª–æ—Å–æ–≤ |
| Chrome Web (Windows) | ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç | ‚≠ê‚≠ê‚≠ê | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –≥–æ–ª–æ—Å–æ–≤ |
| Mobile (iOS) | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | ‚≠ê‚≠ê‚≠ê‚≠ê | –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ |
| Mobile (Android) | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | ‚≠ê‚≠ê‚≠ê‚≠ê | –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ |

---

## Xcode Setup

### üçé –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Xcode –¥–ª—è macOS

**–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Xcode:**

1. **–ü—Ä–∏–Ω—è—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é:**
```bash
sudo xcodebuild -license accept
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Command Line Tools:**
```bash
sudo xcode-select --install
```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç—å:**
```bash
xcode-select -p
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: /Applications/Xcode.app/Contents/Developer
```

4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Flutter:**
```bash
flutter doctor
flutter config --enable-macos-desktop
```

5. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:**
```bash
flutter create .
flutter run -d macos
```

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ Xcode

**–û—à–∏–±–∫–∞: "xcrun: error: unable to find utility"**
```bash
sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer
sudo xcode-select --install
```

**–û—à–∏–±–∫–∞: "No valid code signing certificate"**
- –û—Ç–∫—Ä–æ–π—Ç–µ Xcode
- Preferences ‚Üí Accounts ‚Üí Add Apple ID
- –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø–æ–¥–ø–∏—Å–∏

---

## üîç Debugging

### Flutter DevTools

```bash
flutter pub global activate devtools
flutter pub global run devtools
```

### –õ–æ–≥–∏ TTS

–î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```javascript
window.speechSynthesis.getVoices().forEach(voice => {
  console.log(`${voice.name} (${voice.lang})`);
});
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

```dart
// –í –≤–∏–¥–∂–µ—Ç–µ
final l10n = AppLocalizations.of(context)!;
print('Current locale: ${l10n.localeName}');
```

---

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `flutter doctor`
2. –û—á–∏—Å—Ç–∏—Ç–µ build: `flutter clean`
3. –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `flutter pub get`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `flutter run --verbose`

